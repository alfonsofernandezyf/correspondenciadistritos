<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Consulta de Distritos</title>

  <!-- Bootstrap 5 (CSS) -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <!-- DataTables + Bootstrap 5 + Responsive (CSS) -->
  <link rel="stylesheet"
        href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet"
        href="https://cdn.datatables.net/responsive/3.0.2/css/responsive.bootstrap5.min.css">
</head>
<body class="bg-light">

  <div class="container py-4">
    <h1 class="text-center mb-4">Consulta de Distritos</h1>

    <!-- la tabla se rellenará con JS -->
    <table id="tablaDistritos"
           class="table table-striped table-bordered nowrap w-100"></table>
  </div>

  <!-- --- ------------------------  JS  ---------------------------------- -->

  <!-- jQuery (DataTables lo requiere) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- Bootstrap 5 (JS) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- DataTables núcleo + integración Bootstrap 5 + Responsive -->
  <script src="https://cdn.datatables.net/2.0.8/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/3.0.2/js/dataTables.responsive.min.js"></script>

  <!-- Lógica propia -->
  <script>
    // Carga del JSON y creación de la tabla
    fetch('distritos.json')
      .then(r => r.json())
      .then(crearTabla)
      .catch(err => console.error('No se pudo leer distritos.json', err));

    function crearTabla(data) {
      $('#tablaDistritos').DataTable({
        data,
        columns: [
          { title: 'Sección',          data: 'SECCIÓN' },
          { title: 'Demarcación',      data: 'DEMARCACIÓN TERRITORIAL' },
          { title: 'Distrito Federal', data: 'DISTRITO JUDICIAL ELECTORAL FEDERAL' },
          { title: 'PDF Federal',      data: 'ArchivoJudicial', render: linkPDF },
          { title: 'Distrito Local',   data: 'DISTRITO JUDICIAL ELECTORAL LOCAL' },
          { title: 'PDF Local',        data: 'ArchivoLocal',    render: linkPDF }
        ],
        responsive: true,
        pageLength: 25,
        language: {
          url: 'https://cdn.datatables.net/plug-ins/2.0.8/i18n/es-MX.json'
        }
      });
    }

    // Genera el botón con enlace al PDF (o celda vacía si no hay archivo)
    function linkPDF(nombre) {
      if (!nombre) return '';
      return `<a class="btn btn-sm btn-primary"
                 href="pdfs/${encodeURIComponent(nombre)}"
                 target="_blank" rel="noopener">
               Ver&nbsp;PDF
              </a>`;
    }
  </script>
</body>
</html>
